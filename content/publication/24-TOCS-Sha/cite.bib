@article{10.1145/3639564,
  author = {Sha, Sai and Li, Chuandong and Wang, Xiaolin and Wang, Zhenlin and Luo, Yingwei},
  title = {Hardware-Software Collaborative Tiered-Memory Management Framework for Virtualization},
  year = {2024},
  issue_date = {May 2024},
  publisher = {Association for Computing Machinery},
  address = {New York, NY, USA},
  volume = {42},
  number = {1--2},
  issn = {0734-2071},
  url = {https://doi.org/10.1145/3639564},
  doi = {10.1145/3639564},
  abstract = {The tiered-memory system can effectively expand the memory capacity for virtual machines (VMs). However, virtualization introduces new challenges specifically in enforcing performance isolation, minimizing context switching, and providing resource overcommit. None of the state-of-the-art designs consider virtualization and address these challenges; we observe that a VM with tiered memory incurs up to a 2\texttimes{} slowdown compared to a DRAM-only VM.We propose vTMM, a hardware-software collaborative tiered-memory management framework for virtualization. A key insight in vTMM is to leverage the unique system features in virtualization to meet the above challenges. vTMM automatically determines page hotness and migrates pages between fast and slow memory to achieve better performance. Specially, vTMM optimizes page tracking and migration based on page-modification logging (PML), a hardware-assisted virtualization mechanism, and adaptively distinguishes hot/cold pages through the page “temperature” sorting. vTMM also dynamically adjusts fast memory among multi-VMs on demand by using a memory pool. Further, vTMM tracks huge pages at regular-page granularity in hardware and splits/merges pages in software, realizing hybrid-grained page management and optimization. We implement and evaluate vTMM with single-grained page management on an Intel processor, and the hybrid-grained page management on a Sunway processor with hardware mode supporting hardware/software co-designs. Experiments show that vTMM outperforms existing tiered-memory management designs in virtualization.},
  journal = {ACM Trans. Comput. Syst.},
  month = feb,
  articleno = {4},
  numpages = {32},
  keywords = {Tiered memory, virtual machine, hardware and software co-design, PML}
}